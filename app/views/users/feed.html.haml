%br
%br
%div{class:"container",href:""}
  %a{href:new_post_path ,class:"btn btn-primary" ,style:"color:white"}Create post
- c = 0
-@post.each do |p|
  %div{class:"container border border-1 m-2"}
    %p= link_to "name : #{User.find_by_id(p[0]).name}" ,"/profile/#{User.find_by_id(p[0]).name}"
    %p= "msg : #{p[1]}"
    %p{style:"margin-bottom:0.8rem;"}= "updated at : #{p[2]}"


    %p{id:"likeby#{Post.find(p[3]).id}", hidden:""}
      - Post.find(p[3]).likes.each do |u|
        = u.name + ","
    -# %button.btn.btn-link{"data-bs-target" => "#showName#{c}", "data-bs-toggle" => "modal", class:"m-0 p-0 "} like : #{@getLike[c]["numberOfLike"]}
    -# %button.btn.btn-link{ "data-bs-toggle" => "modal", class:"m-0 p-0 btnListName",id:"#{Post.find(p[3]).id} #likeby#{Post.find(p[3]).id}" } like : #{Post.find(p[3]).likes.count}
    %button.btn.btn-link.showlike.btn-sm{class:"p-0",type: "button" ,id:"#{Post.find(p[3]).id} #likeby#{Post.find(p[3]).id}" } like = #{Post.find(p[3]).likes.count}



    %hr{style:"margin:0.5rem 0;"}
    %div{class:"container mb-1 "}
      -if(Like.find_by(post_id:p[3],user_id:session[:user_id]))
        = button_to "Unlike", setLike_url, method: :post, params: { postID:"#{p[3]}" },class:"btn btn-info btn-sm"

      -else
        = button_to "Like", setLike_url, method: :post, params: { postID:"#{p[3]}" },class:"btn btn-info btn-sm"
    -c = c+1

.modal.fade{id:"showlike"}
  .modal-dialog
    .modal-content
      .modal-header
        %h5.modal-title list name
        %button.btn-close{"data-bs-dismiss" => "modal"}
      .modal-body

        %ul.list-group.list-group-flush
          #showlikeBodyText
          -# -Post.find(data[3]).likes.each do |u|
          -#   %a{href:"/profile/#{u.name}" ,class:"list-group-item" ,color:"black"} #{u.name}

:javascript
  $(document).ready(function(){
    $(".showlike").click(function(){
      var getData = this.id.split(" ");
      var postID = getData[0];
      var getLikeName = $(getData[1]).text().split(",");
      for (var i = 0; i < getData.length; i++){
        var start = '<a href='
        var getLink = '/profile/'+getLikeName[i]+'>';
        var link = getLink.replace(/\s/g, '');
        var tempname = getLikeName[i]
        var name = getLikeName[i].replace(/\s/g, '');
        var suffix = '</a></br>'
        getLikeName[i] = start+link+name+suffix;
      }

      $("#showlikeBodyText").html(getLikeName);
      $("#showlike").modal("toggle");
    });
  });
